<IfModule mod_ssl.c>
<VirtualHost *:443>
    ServerName localhost
    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/community.unix.com/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/community.unix.com/privkey.pem
    
     # Block external access to localhost over HTTPS
    <Location />
        Require ip 127.0.0.1
        Require ip ::1
    </Location>

    # Redirect localhost requests to the correct domain
    Redirect 301 / https://community.unix.com/

    ErrorLog ${APACHE_LOG_DIR}/localhost_ssl_error.log
    CustomLog ${APACHE_LOG_DIR}/localhost_ssl_access.log combined
</VirtualHost>
</IfModule>

